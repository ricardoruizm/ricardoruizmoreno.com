---
const navItems = [
  { href: "/", text: "Home" },
  { href: "/cv/", text: "CV" },
  { href: "/proyectos/", text: "Proyectos" },
  { href: "/prensa/", text: "Prensa" },
  { href: "/contacto/", text: "Contacto" },
];

const logoUrl = "https://ricardoruizmoreno.com/wp-content/uploads/2022/08/logo-blanco.png";
const currentPath = Astro.url.pathname;
---
<header class="fixed top-0 left-0 w-full bg-gray-900/80 backdrop-blur-sm z-50 border-b border-gray-800">
  <div class="container mx-auto flex justify-between items-center p-4 md:p-6">
    <a href="/" class="hover:opacity-80 transition-opacity">
      {currentPath.startsWith('/proyectos') ? (
        <img src={logoUrl} alt="Logo Ricardo Ruiz Moreno" class="h-8 w-auto" />
      ) : (
        <span class="text-xl font-bold text-white">Ricardo Ruiz Moreno</span>
      )}
    </a>

    <nav class="hidden md:flex items-center space-x-6">
      {navItems.map(item => {
        const isActive = currentPath === item.href || (item.href !== "/" && currentPath.startsWith(item.href));
        return <a href={item.href} class:list={[
          "transition-colors",
          isActive ? "text-green-400 font-semibold" : "text-gray-300 hover:text-green-400"
        ]}>{item.text}</a>
      })}
      <a 
        href="https://meetings.hubspot.com/ricardo-ruiz-moreno" 
        target="_blank" 
        rel="noopener noreferrer" 
        class="bg-green-500 text-white font-semibold px-4 py-2 rounded-full hover:bg-green-600 transition-colors"
      >
        Agendar Reunión
      </a>
    </nav>

    <div class="md:hidden">
      <button id="mobile-menu-button" class="text-white p-2" aria-label="Abrir menú">
        <svg id="menu-icon-open" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
        <svg id="menu-icon-close" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
      </button>
    </div>
  </div>

  <div id="mobile-menu" class="hidden md:hidden bg-gray-900/95 backdrop-blur-sm">
    <nav class="flex flex-col items-center space-y-6 py-8">
      {navItems.map(item => {
        const isActive = currentPath === item.href || (item.href !== "/" && currentPath.startsWith(item.href));
        return <a href={item.href} class:list={[
          "text-lg transition-colors",
          isActive ? "text-green-400 font-semibold" : "text-gray-300 hover:text-green-400"
        ]}>{item.text}</a>
      })}
       <a 
        href="https://meetings.hubspot.com/ricardo-ruiz-moreno" 
        target="_blank" 
        rel="noopener noreferrer" 
        class="bg-green-500 text-white font-semibold px-6 py-3 rounded-full hover:bg-green-600 transition-colors mt-4"
      >
        Agendar Reunión
      </a>
    </nav>
  </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const openIcon = document.getElementById('menu-icon-open');
    const closeIcon = document.getElementById('menu-icon-close');
    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
        openIcon.classList.toggle('hidden');
        closeIcon.classList.toggle('hidden');
      });
    }
    mobileMenu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        if (!mobileMenu.classList.contains('hidden')) {
          mobileMenu.classList.add('hidden');
          openIcon.classList.remove('hidden');
          closeIcon.classList.add('hidden');
        }
      });
    });
  });
</script>