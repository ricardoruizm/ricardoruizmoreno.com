---
import Layout from '../../layouts/Layout.astro';
import { projects } from '../../data/projects.js';
import { Image } from 'astro:assets';

export async function getStaticPaths() {
  return projects.map(project => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
---

<Layout 
  title={project.title} 
  description={project.description} 
  image={project.imageUrl}
>
  <div class="container mx-auto px-6 py-24 pt-40">
    <div class="text-center mb-16">
      <p class="text-green-400 font-semibold mb-2">{project.category}</p>
      <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-green-400 to-teal-400">
        {project.title}
      </h1>
    </div>

    <div class="max-w-4xl mx-auto">
      <h2 class="text-3xl font-bold text-white mb-4 border-l-4 border-green-400 pl-4">Description</h2>
      <div class="prose prose-invert lg:prose-xl prose-p:text-gray-300">
        <p>{project.description}</p>
        {project.mainContent && <Fragment set:html={project.mainContent} />}
      </div>

      {project.responsibilities && (
        <div class="mt-12">
          {project.responsibilities.marketing && (
            <div class="mb-6">
              <h3 class="text-2xl font-bold text-white">Marketing:</h3>
              <ul class="list-disc list-inside text-gray-300 mt-2 space-y-1">
                {project.responsibilities.marketing.map((item: string) => <li>{item}</li>)}
              </ul>
            </div>
          )}
          {project.responsibilities.digitalProduct && (
            <div>
              <h3 class="text-2xl font-bold text-white">Producto Digital:</h3>
              <ul class="list-disc list-inside text-gray-300 mt-2 space-y-1">
                {project.responsibilities.digitalProduct.map((item: string) => <li>{item}</li>)}
              </ul>
            </div>
          )}
          {project.responsibilities.general && (
            <div>
              <ul class="list-disc list-inside text-gray-300 mt-2 space-y-1">
                {project.responsibilities.general.map((item: string) => <li>{item}</li>)}
              </ul>
            </div>
          )}
        </div>
      )}

      {project.gallery && (
        <div class="mt-16">
          <h2 class="text-3xl font-bold text-white mb-8 border-l-4 border-green-400 pl-4">Evidencia</h2>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
            {project.gallery.map((image: { url: string; caption: string }) => (
              <figure>
                <Image src={image.url} alt={image.caption} width={1024} height={535} class="rounded-lg shadow-2xl w-full h-auto object-cover" />
                <figcaption class="text-center text-sm text-gray-400 mt-2">{image.caption}</figcaption>
              </figure>
            ))}
          </div>
        </div>
      )}
    </div>

    <div class="text-center mt-20">
       <a href="/proyectos" class="border border-green-400 text-green-400 px-8 py-3 rounded-full font-semibold hover:bg-green-400 hover:text-gray-900 transition-all duration-300">
        ‚Üê Volver a Proyectos
      </a>
    </div>
  </div>
</Layout>