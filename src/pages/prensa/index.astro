---
import Layout from '../../layouts/Layout.astro';
// 1. Importamos nuestro conector de Sanity
import { sanityClient } from '../../lib/sanityClient.js';

// 2. Hacemos una consulta a Sanity para traer los artículos
const query = `*[_type == "pressArticle"] | order(_createdAt desc){
  _id,
  title,
  "slug": slug.current,
  description
}`;
const articles = await sanityClient.fetch(query);
---

<Layout title="Prensa - Ricardo Ruiz Moreno">
  <div class="container mx-auto px-6 py-24 pt-40">
    <div class="text-center mb-16">
      <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight">
        <span class="bg-clip-text text-transparent bg-gradient-to-r from-green-400 to-teal-400">
          Prensa y Publicaciones
        </span>
      </h1>
      <p class="mt-4 text-lg text-gray-400 max-w-2xl mx-auto">
        Algunas de mis apariciones en medios, eventos y reconocimientos en la industria.
      </p>
    </div>

    <div class="max-w-4xl mx-auto space-y-12">
      {articles.map(article => (
        <a href={`/prensa/${article.slug}`} class="block group">
          <div class="p-8 border border-gray-700 rounded-lg hover:bg-gray-800 hover:border-green-400 transition-all duration-300">
            <h2 class="text-3xl font-bold text-white group-hover:text-green-400 transition-colors duration-300">{article.title}</h2>
            <p class="text-gray-400 mt-2">{article.description}</p>
            <div class="text-green-500 font-semibold mt-4 inline-block">
              Leer más →
            </div>
          </div>
        </a>
      ))}
    </div>
  </div>
</Layout>